{
  "shopify_apps": {
    "fliphtml5": {
      "name": "FlipHTML5 Digital Reader",
      "purpose": "Lecteur numérique interactif pour livres",
      "app_url": "https://apps.shopify.com/fliphtml5",
      "pricing": "À partir de 14$/mois",
      "setup": {
        "step_1": "Installer l'app depuis Shopify App Store",
        "step_2": "Créer compte FlipHTML5 sur fliphtml5.com",
        "step_3": "Obtenir API Key dans FlipHTML5 Dashboard > Settings > API",
        "step_4": "Entrer API Key dans Theme Settings > Apps et Intégrations",
        "step_5": "Uploader PDFs des livres dans FlipHTML5",
        "step_6": "Générer embed codes pour chaque livre"
      },
      "configuration": {
        "api_key_location": "Theme Settings > Apps > FlipHTML5 API Key",
        "account_id_location": "Theme Settings > Apps > FlipHTML5 Account ID",
        "embed_method": "iframe",
        "responsive": true,
        "mobile_optimized": true
      },
      "features": [
        "Lecteur flip book réaliste",
        "Lecture responsive (desktop + mobile)",
        "Recherche dans le texte",
        "Annotations privées client",
        "Mode offline disponible",
        "Protection anti-copie",
        "Analytics de lecture"
      ],
      "integration_code": {
        "product_template": "snippets/fliphtml5-reader.liquid",
        "javascript": "assets/fliphtml5-config.js",
        "webhook_triggers": [
          "orders/paid -> Generate unique reader link",
          "customers/create -> Create FlipHTML5 account"
        ]
      },
      "api_endpoints": {
        "create_account": "POST /api/v1/users/create",
        "generate_link": "POST /api/v1/books/{book_id}/generate-link",
        "revoke_access": "DELETE /api/v1/access/{access_id}",
        "get_analytics": "GET /api/v1/analytics/user/{user_id}"
      }
    },
    "sky_pilot": {
      "name": "Sky Pilot - Digital Downloads & Subscriptions",
      "purpose": "Gestion des abonnements et livraisons numériques",
      "app_url": "https://apps.shopify.com/sky-pilot",
      "pricing": "14.99$/mois + transaction fees",
      "setup": {
        "step_1": "Installer Sky Pilot depuis Shopify App Store",
        "step_2": "Configurer plans d'abonnement (Mensuel/Annuel)",
        "step_3": "Uploader fichiers numériques (PDFs watermarkés)",
        "step_4": "Configurer règles de livraison automatique",
        "step_5": "Personnaliser emails de livraison",
        "step_6": "Activer webhooks pour synchronisation"
      },
      "subscription_plans": [
        {
          "name": "Abonnement Mensuel Premium",
          "price": "19.99 EUR/mois",
          "benefits": [
            "Accès illimité à tous les livres numériques",
            "Nouvelles sorties incluses",
            "Support prioritaire",
            "Accès FlipHTML5 Premium"
          ],
          "product_id": "subscription-monthly"
        },
        {
          "name": "Abonnement Annuel Premium",
          "price": "199.99 EUR/an",
          "savings": "16% vs mensuel",
          "benefits": [
            "Tous les avantages du mensuel",
            "2 mois gratuits",
            "Livres physiques à prix réduit (-20%)",
            "Accès prioritaire aux événements"
          ],
          "product_id": "subscription-annual"
        }
      ],
      "digital_delivery": {
        "method": "Automatic email after payment",
        "download_limit": "Illimité pour abonnés, 5x pour achats uniques",
        "link_expiry": "24 heures pour sécurité",
        "file_hosting": "Sky Pilot secure servers",
        "watermarking": "Via LemonInk integration"
      },
      "webhooks": {
        "subscription_created": "Activate full library access",
        "subscription_renewed": "Extend access period",
        "subscription_cancelled": "Revoke library access, keep purchased items",
        "payment_failed": "Send reminder, suspend after 3 failures"
      }
    },
    "lemonink": {
      "name": "LemonInk DRM & Watermarking",
      "purpose": "Protection DRM et watermarking des PDFs",
      "app_url": "https://www.lemonink.co/",
      "pricing": "Custom pricing based on volume",
      "setup": {
        "step_1": "Créer compte LemonInk Business",
        "step_2": "Obtenir API credentials",
        "step_3": "Configurer dans Theme Settings > Apps",
        "step_4": "Uploader master PDFs non-watermarkés",
        "step_5": "Configurer template de watermark (nom + email)",
        "step_6": "Tester avec commande test"
      },
      "watermarking": {
        "trigger": "orders/paid webhook",
        "template": "{{ customer.name }} - {{ customer.email }} - {{ order.name }}",
        "position": "Footer de chaque page",
        "opacity": "30%",
        "font": "Arial 8pt",
        "color": "#999999"
      },
      "drm_features": [
        "Watermark personnalisé par client",
        "Protection impression (limitée ou bloquée)",
        "Protection copier-coller (optionnel)",
        "Expiration de fichier (optionnel)",
        "Tracking des ouvertures",
        "Révocation à distance si fraude détectée"
      ],
      "api_integration": {
        "endpoint": "https://api.lemonink.co/v1/watermark",
        "method": "POST",
        "authentication": "Bearer token",
        "request_body": {
          "pdf_url": "URL du PDF master",
          "watermark_text": "Customer info",
          "customer_email": "Delivery email",
          "order_id": "Shopify order number"
        },
        "response": {
          "watermarked_pdf_url": "Secure download link",
          "expires_in": "24h",
          "tracking_id": "For analytics"
        }
      }
    },
    "multi_currency": {
      "name": "Shopify Markets (Native)",
      "purpose": "Gestion multi-devises et multi-pays",
      "pricing": "Inclus dans Shopify Plus / Advanced",
      "currencies_supported": [
        {
          "code": "EUR",
          "symbol": "€",
          "primary": true,
          "countries": ["FR", "BE", "CH", "LU"]
        },
        {
          "code": "USD",
          "symbol": "$",
          "countries": ["US", "CA"]
        },
        {
          "code": "ILS",
          "symbol": "₪",
          "countries": ["IL"]
        },
        {
          "code": "CAD",
          "symbol": "C$",
          "countries": ["CA"]
        }
      ],
      "conversion": {
        "method": "Shopify auto-conversion",
        "update_frequency": "Hourly",
        "rounding": "To nearest 0.99",
        "display": "Show original + converted price"
      },
      "implementation": {
        "liquid_filter": "{{ product.price | money_with_currency }}",
        "javascript": "Shopify.Currency.convert()",
        "cookie_storage": "cart.currency"
      }
    },
    "email_automation": {
      "name": "Shopify Email (Native)",
      "purpose": "Automations email et newsletters",
      "pricing": "2,500 emails gratuits/mois, puis 1$/1,000 emails",
      "automations": [
        {
          "name": "Welcome Series",
          "trigger": "Customer creates account",
          "emails": [
            {
              "delay": "Immediate",
              "subject": "Bienvenue chez Breslev Books!",
              "content": "Introduction + 10% discount code"
            },
            {
              "delay": "3 days",
              "subject": "Découvrez nos bestsellers",
              "content": "Top 5 books showcase"
            }
          ]
        },
        {
          "name": "Abandoned Cart",
          "trigger": "Cart not completed after 1 hour",
          "emails": [
            {
              "delay": "1 hour",
              "subject": "Votre panier vous attend",
              "content": "Reminder + cart items"
            },
            {
              "delay": "24 hours",
              "subject": "Dernière chance - 5% de réduction",
              "content": "Urgency + discount"
            }
          ]
        },
        {
          "name": "Post-Purchase",
          "trigger": "Order fulfilled",
          "emails": [
            {
              "delay": "7 days",
              "subject": "Comment trouvez-vous votre livre?",
              "content": "Review request + related products"
            }
          ]
        },
        {
          "name": "Subscription Renewal",
          "trigger": "7 days before renewal",
          "emails": [
            {
              "delay": "7 days before",
              "subject": "Votre abonnement arrive à échéance",
              "content": "Renewal reminder + benefits recap"
            }
          ]
        }
      ]
    },
    "analytics": {
      "name": "Google Analytics 4 + Meta Pixel",
      "purpose": "Tracking et analytics avancés",
      "setup": {
        "google_analytics": {
          "step_1": "Créer propriété GA4 sur analytics.google.com",
          "step_2": "Obtenir Measurement ID (G-XXXXXXXXXX)",
          "step_3": "Ajouter dans Theme Settings > Apps > Google Analytics ID",
          "step_4": "Activer Enhanced E-commerce",
          "step_5": "Configurer conversions importantes"
        },
        "meta_pixel": {
          "step_1": "Créer Pixel dans Facebook Events Manager",
          "step_2": "Obtenir Pixel ID",
          "step_3": "Ajouter dans Theme Settings > Apps > Facebook Pixel ID",
          "step_4": "Configurer événements : ViewContent, AddToCart, Purchase",
          "step_5": "Vérifier avec Meta Pixel Helper extension"
        }
      },
      "tracked_events": [
        "page_view",
        "view_item",
        "add_to_cart",
        "begin_checkout",
        "add_payment_info",
        "purchase",
        "subscribe (custom)",
        "download_digital_book (custom)"
      ]
    }
  },
  "integration_workflow": {
    "new_customer_journey": [
      "1. Customer creates account -> Shopify Email welcome series",
      "2. First purchase -> LemonInk watermarks PDF",
      "3. Order paid -> Sky Pilot delivers download link",
      "4. Download -> FlipHTML5 account created automatically",
      "5. 7 days later -> Email review request"
    ],
    "subscription_journey": [
      "1. Customer subscribes -> Sky Pilot creates subscription",
      "2. Payment confirmed -> FlipHTML5 Premium access activated",
      "3. Monthly renewal -> Auto-charge + access extended",
      "4. Cancellation -> FlipHTML5 reverts to basic, purchased books retained"
    ],
    "digital_book_purchase": [
      "1. Add to cart -> Analytics: add_to_cart event",
      "2. Checkout -> Begin checkout tracking",
      "3. Payment -> LemonInk watermarking triggered",
      "4. Fulfillment -> Sky Pilot sends email with download link",
      "5. Download -> FlipHTML5 reader link generated",
      "6. Access -> Customer reads online or downloads watermarked PDF"
    ]
  },
  "testing_checklist": [
    "✓ Test FlipHTML5 reader embed on product page",
    "✓ Test order placement -> PDF watermarking",
    "✓ Test download link delivery via email",
    "✓ Test subscription creation and access",
    "✓ Test multi-currency switching",
    "✓ Test analytics events firing (GA4 + Meta)",
    "✓ Test webhook responses (check Shopify admin)",
    "✓ Test abandoned cart email",
    "✓ Test subscription cancellation flow"
  ]
}
